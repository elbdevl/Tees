<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAZARINE - أثاث مكتبي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #f5f5f5;
        }

        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* صفحة المنتجات الرئيسية */
        .products-page {
            display: block;
        }

        .office-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #3BE5DB, #2a9d8f);
            border-radius: 15px;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .office-header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-bottom: 3px solid #f0f0f0;
        }

        .product-info {
            padding: 15px;
        }

        .product-title {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 10px;
        }

        .product-price {
            color: #3BE5DB;
            font-weight: bold;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .product-actions {
            margin-top: 15px;
        }

        .add-to-cart {
            background: #3BE5DB;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            transition: background 0.3s;
            font-weight: bold;
        }

        .add-to-cart:hover {
            background: #2a9d8f;
        }

        /* صفحة تفاصيل المنتج */
        .product-detail-page {
            display: none;
        }

        .back-button {
            background: #3BE5DB;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            margin-bottom: 30px;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            transition: background 0.3s;
        }

        .back-button:hover {
            background: #2a9d8f;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 25px rgba(0,0,0,0.1);
        }

        .product-gallery {
            position: relative;
        }

        .main-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .thumbnails-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .thumbnail {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border: 2px solid #f0f0f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .thumbnail:hover {
            transform: scale(1.05);
            border-color: #3BE5DB;
        }

        .thumbnail.active {
            border-color: #3BE5DB;
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(59, 229, 219, 0.5);
        }

        .product-info-detail {
            padding: 10px;
        }

        .product-info-detail h1 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            color: #1a1a1a;
        }

        .price-detail {
            font-size: 1.8rem;
            color: #3BE5DB;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .description {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #444;
        }

        /* New Gallery Section */
        .product-description-gallery {
            margin: 30px 0;
            padding: 20px 0;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }
        
        .gallery-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }
        
        .gallery-item {
            height: 180px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .gallery-item:hover img {
            transform: scale(1.05);
        }
        
        .gallery-item:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .product-specs {
            margin-top: 20px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            background: #f8f9fa;
            margin: 10px 0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .spec-item span:first-child {
            font-weight: bold;
            color: #1a1a1a;
        }

        .related-products {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }

        .related-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #1a1a1a;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .category-tag {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #3BE5DB;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        /* التجاوب */
        @media (max-width: 992px) {
            .detail-grid {
                grid-template-columns: 1fr;
            }
            
            .main-image {
                height: 400px;
            }
        }

        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .product-image {
                height: 200px;
            }
            
            .main-image {
                height: 300px;
            }
            
            .thumbnails-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .product-image {
                height: 250px;
            }
            
            .main-image {
                height: 250px;
            }
            
            .thumbnails-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .office-header h1 {
                font-size: 2rem;
            }
            
            .gallery-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* إشعار السلة */
        .cart-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #3BE5DB;
            color: white;
            padding: 15px 25px;
            border-radius: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: fadeInOut 3s forwards;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(20px); }
            10% { opacity: 1; transform: translateY(0); }
            90% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(20px); }
        }
    </style>
</head>
<body>
    <div class="main-content">
        <!-- صفحة المنتجات -->
        <div class="products-page">
            <div class="office-header">
                <h1>الأثاث المكتبي الاحترافي</h1>
                <p>اكتشف مجموعتنا المميزة من حلول العمل الفعالة والأثاث المريح لمكتبك</p>
            </div>
            
            <div class="products-grid" id="productsContainer"></div>
        </div>

        <!-- صفحة التفاصيل -->
        <div class="product-detail-page" id="productDetailPage">
            <button class="back-button" id="backButton">
                <i class="fas fa-arrow-left"></i>
                العودة إلى المتجر
            </button>
            
            <div class="detail-grid" id="productDetailContent"></div>
        </div>
    </div>

    <script>
        // بيانات المنتجات
        const products = [
            {
                id: 1,
                name: 'مكتب عصري',
                price: 880,
                description: 'مكتب عصري بتصميم أنيق مع مساحة تخزين واسعة. مثالي للمكاتب المنزلية والمكاتب الصغيرة. المكتب مصنوع من خشب البلوط عالي الجودة مع قاعدة معدنية متينة. يأتي مع درجين كبيرين ورفين جانبيين لتوفير مساحة تخزين كافية.',
                images: [
                    'https://images.unsplash.com/photo-1524758631624-e2822e304c36?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                    'https://images.unsplash.com/photo-1533090161767-e6ffed986c88?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1169&q=80',
                    'https://images.unsplash.com/photo-1505842381624-c6b0579625a5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                    'https://images.unsplash.com/photo-1567538096630-e0c55bd6354f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80'
                ],
                galleryImages: [
                    'https://images.unsplash.com/photo-1559028012-481c04fa702d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1336&q=80',
                    'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1258&q=80',
                    'https://images.unsplash.com/photo-1538688525198-9b88f6f53126?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1074&q=80',
                    'https://images.unsplash.com/photo-1518455022959-b155619dfc0a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80'
                ],
                specs: {
                    المادة: 'خشب وزجاج',
                    الأبعاد: '160x80x75 سم',
                    الألوان: ['أبيض', 'بني', 'رمادي'],
                    الوزن: '45 كجم',
                    التوصيل: '2-5 أيام عمل'
                },
                category: 'مكاتب',
                related: [2, 3, 4]
            },
            {
                id: 2,
                name: 'طاولة مكتب زجاجية',
                price: 2200,
                description: 'طاولة مكتب زجاجية فاخرة مع قاعدة معدنية متينة. تصميم عصري وأنيق يناسب المكاتب التنفيذية. الزجاج المقاوم للخدوش بسماكة 12مم مع قاعدة فولاذية قوية. توفر مساحة عمل واسعة مع مظهر فاخر.',
                images: [
                    'https://images.unsplash.com/photo-1497366754035-f200968a6e72?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                    'https://images.unsplash.com/photo-1519947486511-46149fa0a254?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1074&q=80',
                    'https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=930&q=80'
                ],
                galleryImages: [
                    'https://images.unsplash.com/photo-1551298370-9d3d53740c72?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1074&q=80',
                    'https://images.unsplash.com/photo-1511632765486-a01980e01a18?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                    'https://images.unsplash.com/photo-1559028012-481c04fa702d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1336&q=80'
                ],
                specs: {
                    المادة: 'زجاج وفولاذ',
                    الأبعاد: '180x90x75 سم',
                    الألوان: ['شفاف', 'أسود'],
                    الوزن: '60 كجم',
                    التوصيل: '3-7 أيام عمل'
                },
                category: 'طاولات',
                related: [1, 3, 4]
            },
            {
                id: 3,
                name: 'خزانة ملفات حديثة',
                price: 1500,
                description: 'خزانة ملفات حديثة بسعة كبيرة وأدراج متعددة. مثالية لتنظيم المستندات والملفات في المكتب. مصنوعة من خشب MDF عالي الجودة مع نظام انزلاق سلس للأدراج. تحتوي على 4 أدراج كبيرة ورفين علويين.',
                images: [
                    'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                    'https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                    'https://images.unsplash.com/photo-1573869909867-9a186f2e2b9f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80'
                ],
                galleryImages: [
                    'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1258&q=80',
                    'https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=930&q=80',
                    'https://images.unsplash.com/photo-1511632765486-a01980e01a18?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80'
                ],
                specs: {
                    المادة: 'خشب صناعي',
                    الأبعاد: '120x40x180 سم',
                    الألوان: ['أبيض', 'رمادي'],
                    الوزن: '55 كجم',
                    التوصيل: '3-6 أيام عمل'
                },
                category: 'خزانات',
                related: [1, 2, 4]
            },
            {
                id: 4,
                name: 'كرسي مكتب فاخر',
                price: 1200,
                description: 'كرسي مكتب فاخر مع دعم ظهر مريح ومساند للذراعين. مصمم لتوفير الراحة خلال ساعات العمل الطويلة. يحتوي على نظام دعم قطني قابل للتعديل ومساند ذراعين قابلة للضبط. المقعد مبطن بإسفنج عالي الكثافة ومغطى بقماش عالي الجودة.',
                images: [
                    'https://images.unsplash.com/photo-1505798577917-a65157d3320a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                    'https://images.unsplash.com/photo-1598300042247-d088f8ab3a91?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=930&q=80',
                    'https://images.unsplash.com/photo-1592078615290-033ee584e267?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1300&q=80'
                ],
                galleryImages: [
                    'https://images.unsplash.com/photo-1538688525198-9b88f6f53126?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1074&q=80',
                    'https://images.unsplash.com/photo-1518455022959-b155619dfc0a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80',
                    'https://images.unsplash.com/photo-1559028012-481c04fa702d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1336&q=80'
                ],
                specs: {
                    المادة: 'جلد صناعي ومعدن',
                    الأبعاد: '65x65x115 سم',
                    الألوان: ['أسود', 'بني', 'أزرق'],
                    الوزن: '18 كجم',
                    التوصيل: '2-4 أيام عمل'
                },
                category: 'كراسي',
                related: [1, 2, 3]
            }
        ];

        // تهيئة التطبيق
        document.addEventListener('DOMContentLoaded', () => {
            const productsContainer = document.getElementById('productsContainer');
            const productDetailPage = document.getElementById('productDetailPage');
            const productDetailContent = document.getElementById('productDetailContent');
            const backButton = document.getElementById('backButton');
            
            // تهيئة التطبيق
            initApp();
            
            function initApp() {
                renderProducts();
                handleRouting();
            }

            // عرض المنتجات
            function renderProducts() {
                productsContainer.innerHTML = products.map(product => `
                    <div class="product-card" data-id="${product.id}">
                        <div class="category-tag">${product.category}</div>
                        <img src="${product.images[0]}" alt="${product.name}" class="product-image">
                        <div class="product-info">
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-price">${product.price} درهم</p>
                            <div class="product-actions">
                                <button class="add-to-cart" data-id="${product.id}">
                                    <i class="fas fa-cart-plus"></i> إضافة للسلة
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');

                addProductEventListeners();
            }

            // عرض تفاصيل المنتج
            function showProductDetail(id) {
                const product = products.find(p => p.id == id);
                productDetailContent.innerHTML = `
                    <div class="product-gallery">
                        <img src="${product.images[0]}" class="main-image" id="mainImage">
                        <div class="thumbnails-grid">
                            ${product.images.map((img, index) => `
                                <img src="${img}" 
                                     class="thumbnail ${index === 0 ? 'active' : ''}" 
                                     onclick="changeMainImage('${img}', this)">
                            `).join('')}
                        </div>
                    </div>
                    <div class="product-info-detail">
                        <h1>${product.name}</h1>
                        <div class="price-detail">${product.price} درهم</div>
                        <p class="description">${product.description}</p>
                        
                        <!-- New Gallery Section -->
                        <div class="product-description-gallery">
                            <h3 class="gallery-title">
                                <i class="fas fa-images"></i>
                                معرض الصور
                            </h3>
                            <div class="gallery-grid">
                                ${product.galleryImages.map(img => `
                                    <div class="gallery-item">
                                        <img src="${img}" alt="صورة إضافية">
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="product-specs">
                            ${Object.entries(product.specs).map(([key, value]) => `
                                <div class="spec-item">
                                    <span>${key}</span>
                                    <span>${Array.isArray(value) ? value.join('، ') : value}</span>
                                </div>
                            `).join('')}
                        </div>
                        <button class="add-to-cart" onclick="addToCart(${product.id})">
                            <i class="fas fa-cart-plus"></i> إضافة إلى السلة
                        </button>
                        
                        ${renderRelatedProducts(product.related)}
                    </div>
                `;

                document.querySelector('.products-page').style.display = 'none';
                productDetailPage.style.display = 'block';
                addRelatedProductsListeners();
            }

            // تغيير الصورة الرئيسية
            window.changeMainImage = function(src, element) {
                document.getElementById('mainImage').src = src;
                document.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
                element.classList.add('active');
            }

            // عرض المنتجات المقترحة
            function renderRelatedProducts(relatedIds) {
                const relatedProducts = products.filter(p => relatedIds.includes(p.id));
                
                return `
                    <div class="related-products">
                        <h3 class="related-title">قد يعجبك أيضاً</h3>
                        <div class="products-grid related-grid">
                            ${relatedProducts.map(product => `
                                <div class="product-card" data-id="${product.id}">
                                    <img src="${product.images[0]}" alt="${product.name}" class="product-image">
                                    <div class="product-info">
                                        <h3 class="product-title">${product.name}</h3>
                                        <span class="product-price">${product.price} درهم</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // إضافة Event Listeners للمنتجات
            function addProductEventListeners() {
                document.querySelectorAll('.product-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        if (!e.target.closest('.add-to-cart')) {
                            const id = card.dataset.id;
                            window.location.hash = `#product/${id}`;
                        }
                    });
                });

                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.stopPropagation();
                        addToCart(e.currentTarget.dataset.id);
                    });
                });
            }

            // إضافة Event Listeners للمنتجات المقترحة
            function addRelatedProductsListeners() {
                document.querySelectorAll('.related-products .product-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const id = card.dataset.id;
                        window.location.hash = `#product/${id}`;
                    });
                });
            }

            // إدارة السلة
            window.addToCart = function(productId) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                const product = products.find(p => p.id == productId);
                
                const existingItem = cart.find(item => item.id == productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                showCartNotification();
            }

            // إشعار الإضافة للسلة
            function showCartNotification() {
                const notification = document.createElement('div');
                notification.className = 'cart-notification';
                notification.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    تمت إضافة المنتج إلى السلة
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }

            // التوجيه
            function handleRouting() {
                const path = window.location.hash.substr(1);
                if (path.startsWith('product/')) {
                    const productId = path.split('/')[1];
                    showProductDetail(productId);
                } else {
                    document.querySelector('.products-page').style.display = 'block';
                    productDetailPage.style.display = 'none';
                }
            }

            // زر العودة
            backButton.addEventListener('click', () => {
                window.history.back();
            });

            // الأحداث
            window.addEventListener('hashchange', handleRouting);
        });
    </script>
</body>
</html>